<!DOCTYPE html><html lang=es><head><title>Haciendo una terminal - Sin comentarios</title><meta charset=utf-8><meta content="width=device-width, initial-scale=1" name=viewport><meta content="Una terminal es una app muy sencilla, solo recibe una entrada y devuelve una salida del shell, pero no, no es sencilla." name=description><link href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><text y='14' x='0'>☕</text></svg>" rel=icon><style>html{color:#483404;background:#F5F5F5;max-width:80%;max-width:80ch;padding:calc(1vmin + .5rem);margin:0 auto;font:14pt sans-serif;font-size:clamp(1.3rem,2.5vw,1.6rem);font-family:system-ui;line-height:1.5}pre{background:#fef;padding:1em;overflow:auto}img{display:block;width:100%}nav ul{padding:0;display:flex;justify-content:space-between;flex-flow:row wrap;gap:1em}nav li{list-style-type:none}footer{margin:2em 0;border-top:.3em solid #ccc}a{color:#93255F}h2{font-weight:400;margin-top:1.75em}img.s{width:70%;margin:auto}</style> <body><main><p><a href=.>Sin comentarios</a> <h1>Haciendo una terminal</h1> <article><p><em> Tiempo estimado de lectura: 3 minutos. </em> <p> Una terminal es una app muy sencilla, solo recibe una entrada y devuelve una salida del shell, pero no, no es sencilla. </p> <img alt="" class=s src=data:image/svg+xml;base64,> <p>Uso la terminal todo el tiempo, mas que nada la abro en fullscreen y ejecuto un Tmux que se guarda automáticamente. Para eso uso la terminal de Ubuntu, <a class=external-link href=https://help.gnome.org/users/gnome-terminal/stable/index.html.en rel="noopener noreferrer" target=_blank>GNOME Terminal</a>. Todo venía bien hasta que tuve ganas de usar fuentes con <a class=external-link href=https://github.com/tonsky/FiraCode rel="noopener noreferrer" target=_blank>ligaduras, como por ejemplo la fuente FiraCode</a>. <p>Me propuse buscar alguna alternativa: <ul><li><a class=external-link href=https://alacritty.org rel="noopener noreferrer" target=_blank>Alacritty</a>: no tiene la soporte para ligaduras. <li><a class=external-link href=https://iterm2.com rel="noopener noreferrer" target=_blank>iTerm2</a> y <a class=external-link href=https://warp.dev/ rel="noopener noreferrer" target=_blank>Warp</a>: solo soportan Mac. <li><a class=external-link href=https://sw.kovidgoyal.net/kitty/ rel="noopener noreferrer" target=_blank>kitty</a>: no soporta bien Tmux. <li><a class=external-link href=https://gitlab.gnome.org/GNOME/console rel="noopener noreferrer" target=_blank>GNOME Console</a>: una alternativa light a gnome-terminal, tampoco tiene la soporte para ligaduras. <li><a class=external-link href=https://github.com/lxqt/qterminal rel="noopener noreferrer" target=_blank>QTerminal</a>: es una terminal de escritorio basado en Qt, ¡tiene la soporte para ligaduras! Pero no puedo pasarle un comando y que se mantenga abierto.</ul> <p>Ya que no estoy interesado en que tenga tabs, ni configuración ni nada raro me propuse a hacer una. ¿Qué tan difícil puede ser? Bueno por empezar, hay que parsear el input. Fácil. Excepto que el input no es sólo texto, sino cualquier tecla que apretas. Luego hay llamás al shell. No momento, al custom shell que tiene el usuario. Bien, esta en la variable SHELL del environment. <p>Ahora si, ejecutamos y tomamos el output y listo. No, hay que parsear los colores. Pero podríamos usar una librería como <a rel="noopener noreferrer" target="_blank" class="external-link" href="https://gitlab.gnome.org/GNOME/vte">VTE (Virtual Terminal Emulator)</a>. Ah no, no soporta ligaduras. Entonces hay que parsear algo como <code>\e[33;1m</code> y convertirlo en color de la letra o del fondo, o si es negrita o si esta subrayado. Todo eso hay que parsearlo a mano. Ah y eso no es suficiente, en realidad hay que hacer un master de pseudoterminal que se comunicará con un slave, esto lo podés hacer con <a rel="noopener noreferrer" target="_blank" class="external-link" href="https://man7.org/linux/man-pages/man7/pty.7.html">PTY</a>. Ah ¿y el scroll? ¿y el historial? Conclusión, no, no es para nada sencillo hacer una terminal. Tal vez algún otro día. <p><em> La Ilustración es de <a href=https://undraw.co/license rel="noopener noreferrer" target=_blank>Katerina Limpitsouni</a> publicada en <a href=https://undraw.co/ rel="noopener noreferrer" target=_blank>unDraw</a>. </em> </article> <p><em> Publicado por <strong>Albo</strong> el jueves 22 de febrero del 2024 en <a href=tag-programacion.html>Programacion</a>. </em> </main> <footer><nav><ul><li><a href=//albo.ar>Home</a> <li><a href=.>Sin comentarios</a> <li><a href=//twitter.com/4lb0>Twitter</a> <li><a href=//github.com/4lb0>Github</a> <li><a href=//linkedin.com/in/rodrigoarce>Linkedin</a> <li><a aria-label="Volver a leer" href=#><span aria-hidden=true>↑ </span>Arriba</a> </ul> </nav> </footer>